input {
	
  file {
    path => "/home/logstash/csv/relatorio-folha-de-pagamento.csv"
    start_position => "beginning"
    sincedb_path => "/dev/null"
  }
}

filter {
  csv {
		separator => ","
    columns => ["Nome", "Referência", "Matrícula", "Tipo de Folha", "Proventos", "Descontos", "Liquido", "Cargo", "Vinculo","Data Admissão", "Lotação"]
  }
   mutate {
    convert => { "Proventos" => "float" }
    convert => { "Descontos" => "float" }
    convert => { "Liquido" => "float" }
  }
  date {
    match => ["Data Admissão", "YYYY-MM-dd HH:mm:ss,SSS"]
    target => "Data Admissão Timestamp"
  }
}

output {
   elasticsearch {
			hosts => ["elasticsearch:9200"]
			user => "elastic"
   		password => "changeme"
     	index => "relatorio-folha-pagamento-anapolis-maio-2022"
  }

	stdout {}
}